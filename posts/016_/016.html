<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raymond Liu Ao">
<meta name="dcterms.date" content="2025-10-15">
<meta name="description" content="Testing Calm during recruiting season - does AI actually customize meditation?">

<title>AI Meditation Apps: Is the Personalization Real? – What Can You Do With AI?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-8fd1faf6fd93e4e6d207ae0f9db51d78.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">What Can You Do With AI?</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/liuaoraymond"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/liuaoray/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">AI Meditation Apps: Is the Personalization Real?</h1>
                  <div>
        <div class="description">
          Testing Calm during recruiting season - does AI actually customize meditation?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">AI</div>
                <div class="quarto-category">health</div>
                <div class="quarto-category">fitness</div>
                <div class="quarto-category">skeptical</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Raymond Liu Ao </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 15, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="stress-testing-ai-meditation" class="level2">
<h2 class="anchored" data-anchor-id="stress-testing-ai-meditation">Stress Testing AI Meditation</h2>
<p>School and recruiting have been picking up intensity—midterms, case prep, networking events, finance interviews. I’ve been consistently stressed and not sleeping well. A friend suggested trying Calm, the meditation app that claims to use AI for personalized relaxation.</p>
<p>I’m skeptical of wellness apps in general, but I figured this was a good test case: if AI personalization works anywhere, it should work when I’m actually stressed and need it. So I signed up for a week to see if the “AI-powered personalization” is real or just marketing.</p>
<p><img src="calm-app-interface.jpg" alt="Calm App Interface" style="max-width: 450px; max-height: 300px; object-fit: contain; display: block; margin: 20px auto;"></p>
<p><em>Calm’s interface showing meditation recommendations</em></p>
</section>
<section id="what-these-apps-claim-to-personalize" class="level2">
<h2 class="anchored" data-anchor-id="what-these-apps-claim-to-personalize">What These Apps Claim to Personalize</h2>
<section id="the-ai-features" class="level3">
<h3 class="anchored" data-anchor-id="the-ai-features">The AI Features</h3>
<p>According to the app and marketing materials: - <strong>Personalized daily recommendations</strong> based on your stress patterns - <strong>Adaptive session length</strong> that adjusts to your schedule - <strong>Content matching</strong> that learns which meditation styles work best for you - <strong>Check-in analysis</strong> that tracks your emotional state over time - <strong>Smart reminders</strong> that send notifications when you’re most likely to need meditation</p>
</section>
<section id="the-setup-process" class="level3">
<h3 class="anchored" data-anchor-id="the-setup-process">The Setup Process</h3>
<p>When I first opened the app, it asked: - Why I’m using Calm (options: stress, sleep, focus, anxiety, etc.) - My experience level with meditation (beginner, intermediate, experienced) - What time of day I prefer to meditate - Whether I want daily reminders</p>
<p>Then it presented a “personalized” home screen with recommended meditations.</p>
<p>Right away, I’m wondering: is this AI learning, or just a decision tree based on my initial answers?</p>
</section>
</section>
<section id="my-week-of-testing" class="level2">
<h2 class="anchored" data-anchor-id="my-week-of-testing">My Week of Testing</h2>
<section id="day-1-2-initial-recommendations" class="level3">
<h3 class="anchored" data-anchor-id="day-1-2-initial-recommendations">Day 1-2: Initial Recommendations</h3>
<p>The app recommended: - “Managing Stress” - 10 minute guided meditation - “Calming Anxiety” - 15 minute session - “Sleep Stories” for nighttime</p>
<p>These matched what I selected during setup (stress management). But they’re also probably what everyone who selects “stress” gets recommended. Nothing personalized yet.</p>
<p>I tried the 10-minute stress management session. It was fine—standard guided meditation with breathing exercises and body scan. At the end, it asked “How do you feel?” with options: Calm, Relaxed, Same, Restless.</p>
<p>I selected “Relaxed.” Let’s see if the app learns from this.</p>
</section>
<section id="day-3-4-different-stress-levels" class="level3">
<h3 class="anchored" data-anchor-id="day-3-4-different-stress-levels">Day 3-4: Different Stress Levels</h3>
<p>On Day 3, I had two interviews back-to-back. Before the first one, I did a quick 5-minute “Focus” meditation the app recommended.</p>
<p>After interviews, I was exhausted and stressed. Opened the app again that evening. It recommended… the same 10-minute stress management session from Day 1.</p>
<p>Wait—shouldn’t it notice I used the app twice in one day, during high-stress moments, and adjust its recommendations? Maybe suggest something longer or more intensive?</p>
<p>Instead, the recommendations looked identical to Day 1.</p>
</section>
<section id="day-5-7-checking-for-patterns" class="level3">
<h3 class="anchored" data-anchor-id="day-5-7-checking-for-patterns">Day 5-7: Checking for Patterns</h3>
<p>I deliberately tried different meditation types: - Morning: 7-minute “Daily Calm” meditation - Afternoon: 10-minute breathing exercise - Night: 20-minute sleep story</p>
<p>Each time, I marked how I felt afterward. Sometimes “Calm,” sometimes “Same,” once “Restless” (I was too stressed to focus).</p>
<p>By Day 7, my recommendations were… still basically the same as Day 1. A few new options appeared in the “Recommended for You” section, but they seemed randomly rotated rather than based on what I’d actually used or found helpful.</p>
</section>
</section>
<section id="is-this-actually-ai-personalization" class="level2">
<h2 class="anchored" data-anchor-id="is-this-actually-ai-personalization">Is This Actually AI Personalization?</h2>
<section id="what-would-real-personalization-look-like" class="level3">
<h3 class="anchored" data-anchor-id="what-would-real-personalization-look-like">What Would Real Personalization Look Like?</h3>
<p>If Calm were truly using AI to personalize my experience, I’d expect:</p>
<p><strong>Usage pattern recognition:</strong> Notice that I meditate more frequently during high-stress periods (like Day 3 with interviews) and suggest more intensive practices during those times.</p>
<p><strong>Effectiveness tracking:</strong> If I consistently rate 7-minute sessions as “Relaxing” but 20-minute sessions as “Restless” (because I can’t focus that long when stressed), it should recommend shorter sessions.</p>
<p><strong>Time-of-day optimization:</strong> Learn that I actually use the app most in the evening, not morning, despite saying “morning” in my initial setup.</p>
<p><strong>Content adaptation:</strong> If I skip certain meditation styles repeatedly, stop recommending them.</p>
</section>
<section id="what-i-actually-observed" class="level3">
<h3 class="anchored" data-anchor-id="what-i-actually-observed">What I Actually Observed</h3>
<p>The recommendations seemed based on: - My initial survey answers (static profile) - General content rotation (everyone sees different things each day) - Basic category matching (I said “stress,” so I get stress-related content)</p>
<p>This isn’t machine learning—it’s a preference quiz with some randomization.</p>
</section>
<section id="the-check-in-feature" class="level3">
<h3 class="anchored" data-anchor-id="the-check-in-feature">The “Check-In” Feature</h3>
<p>Calm asks “How do you feel?” after each session. This data could theoretically train a model to learn what works for me.</p>
<p>But after a week of providing this feedback, I saw no evidence it changed anything. The app didn’t: - Suggest more of what I rated highly - Avoid what I rated poorly - Adjust session length based on my responses - Change reminder timing based on when I actually use the app</p>
<p>According to <a href="https://www.sciencedirect.com/science/article/pii/S2949916X24000525">research on adaptive meditation apps</a>, truly personalized digital interventions should show measurable adaptation over time. I didn’t see this.</p>
</section>
</section>
<section id="ai-meditation-vs.-regular-guided-meditation" class="level2">
<h2 class="anchored" data-anchor-id="ai-meditation-vs.-regular-guided-meditation">AI Meditation vs.&nbsp;Regular Guided Meditation</h2>
<section id="what-makes-meditation-effective" class="level3">
<h3 class="anchored" data-anchor-id="what-makes-meditation-effective">What Makes Meditation Effective</h3>
<p>Research on meditation effectiveness shows it depends on: - Consistency of practice - Finding techniques that match your needs - Appropriate session length for your focus capacity - Quality of instruction</p>
<p>None of these inherently require AI. A good meditation teacher, a simple YouTube video, or even free apps without “AI” can provide these.</p>
</section>
<section id="does-ai-add-value" class="level3">
<h3 class="anchored" data-anchor-id="does-ai-add-value">Does AI Add Value?</h3>
<p>In theory, AI personalization could help by: - Learning which techniques work for your specific stress patterns - Adapting difficulty as you build meditation capacity - Identifying optimal times for practice based on your schedule</p>
<p>But Calm doesn’t seem to do this. The “AI” label appears to be marketing rather than meaningful personalization.</p>
</section>
<section id="the-free-alternative" class="level3">
<h3 class="anchored" data-anchor-id="the-free-alternative">The Free Alternative</h3>
<p>I compared Calm to free guided meditations on YouTube and Spotify. Many are: - Same quality instruction - Same variety of styles and lengths - No subscription fee - Equally effective</p>
<p>The main advantage of these apps is convenience (everything in one app) and production quality (nice UI, good voice actors). But these aren’t AI features—they’re just app design.</p>
<p>You could manually build a YouTube playlist of meditations that work for you, and that “personalization” would be more effective than Calm’s alleged AI.</p>
</section>
</section>
<section id="the-ai-ification-of-wellness-apps" class="level2">
<h2 class="anchored" data-anchor-id="the-ai-ification-of-wellness-apps">The AI-ification of Wellness Apps</h2>
<section id="why-everything-is-ai-powered-now" class="level3">
<h3 class="anchored" data-anchor-id="why-everything-is-ai-powered-now">Why Everything Is “AI-Powered” Now</h3>
<p>Calm isn’t alone. Nearly every wellness app now claims AI: - “AI-powered” workout plans - “AI-driven” nutrition coaching - “AI-enhanced” sleep tracking - “AI-personalized” meditation</p>
<p>The pattern is clear: adding “AI” to your app: - Justifies higher subscription prices (Calm is $70/year) - Makes the app sound more sophisticated - Appeals to tech-forward users - Differentiates from free alternatives</p>
</section>
<section id="whats-probably-happening" class="level3">
<h3 class="anchored" data-anchor-id="whats-probably-happening">What’s Probably Happening</h3>
<p>Most “AI personalization” in wellness apps is likely: - Simple if-then logic based on user inputs - Random content rotation to create variety - Basic categorization (stress → stress content) - A/B testing to optimize engagement (not personalization)</p>
<p>These are useful features, but they’re not AI in any meaningful sense.</p>
<p>According to <a href="https://www.thelancet.com/journals/landig/article/PIIS2589-7500(23)00231-9/fulltext">analysis of health app AI claims</a>, most apps labeled as “AI-powered” show no evidence of machine learning in their actual operation. Calm appears to fit this pattern.</p>
</section>
<section id="the-premium-price-problem" class="level3">
<h3 class="anchored" data-anchor-id="the-premium-price-problem">The Premium Price Problem</h3>
<p>Calm charges $70/year partly because of its AI personalization promise. But if the personalization isn’t real, you’re paying a premium for: - A nice UI - Good production quality - Convenient access to meditation content</p>
<p>These are fine features, but they don’t require AI or justify the AI marketing.</p>
</section>
</section>
<section id="did-it-actually-help-with-stress" class="level2">
<h2 class="anchored" data-anchor-id="did-it-actually-help-with-stress">Did It Actually Help With Stress?</h2>
<section id="the-honest-assessment" class="level3">
<h3 class="anchored" data-anchor-id="the-honest-assessment">The Honest Assessment</h3>
<p>Yes, using Calm helped me feel less stressed during recruiting season. But I’m pretty sure this had nothing to do with AI:</p>
<p><strong>Meditation works:</strong> Taking 10 minutes to breathe and focus helps reduce stress. This is true whether you use a paid app, YouTube, or just sit quietly.</p>
<p><strong>Guided instruction helps:</strong> Having someone guide you through meditation is easier than doing it alone, especially as a beginner. But good instruction doesn’t require AI.</p>
<p><strong>Convenience matters:</strong> Having all meditations in one app makes it more likely I’ll actually do it. But this is about app design, not AI.</p>
<p><strong>Reminder system:</strong> The daily notifications helped build a habit. Again, not AI—just push notifications.</p>
</section>
<section id="would-free-alternatives-work-as-well" class="level3">
<h3 class="anchored" data-anchor-id="would-free-alternatives-work-as-well">Would Free Alternatives Work as Well?</h3>
<p>Probably yes. The benefit came from: 1. Deciding to prioritize meditation during a stressful period 2. Having accessible guided content 3. Following through consistently</p>
<p>None of this required Calm specifically or its “AI” features.</p>
</section>
<section id="the-placebo-question" class="level3">
<h3 class="anchored" data-anchor-id="the-placebo-question">The Placebo Question</h3>
<p>There’s a possibility that believing the app is “personalized” makes it more effective through placebo effect. If you think the AI is customizing meditations for your specific needs, you might engage more seriously.</p>
<p>But this raises an ethical question: should companies charge premium prices for placebo effects based on false AI claims?</p>
</section>
</section>
<section id="should-you-use-ai-meditation-apps" class="level2">
<h2 class="anchored" data-anchor-id="should-you-use-ai-meditation-apps">Should You Use AI Meditation Apps?</h2>
<section id="use-them-if" class="level3">
<h3 class="anchored" data-anchor-id="use-them-if">Use Them If:</h3>
<ul>
<li>You want convenient access to guided meditation</li>
<li>You find the UI and production quality motivating</li>
<li>You’re willing to pay for convenience</li>
<li>You need variety in meditation styles</li>
</ul>
<p>But don’t pay extra for “AI personalization” that probably isn’t real.</p>
</section>
<section id="skip-them-if" class="level3">
<h3 class="anchored" data-anchor-id="skip-them-if">Skip Them If:</h3>
<ul>
<li>You’re comfortable finding free meditations on YouTube/Spotify</li>
<li>You don’t need an app to motivate practice</li>
<li>You’re skeptical of premium subscription prices</li>
</ul>
</section>
<section id="better-approaches" class="level3">
<h3 class="anchored" data-anchor-id="better-approaches">Better Approaches:</h3>
<p><strong>Try free options first:</strong> Use YouTube or free apps (Insight Timer, UCLA Mindful) to see if guided meditation helps you.</p>
<p><strong>Manual personalization:</strong> Pay attention to which meditation styles, lengths, and times of day work best for you. This is better personalization than any AI.</p>
<p><strong>Focus on consistency over features:</strong> The best meditation app is the one you’ll actually use. Fancy AI features don’t matter if you don’t build a habit.</p>
<p><strong>Question the AI label:</strong> When any wellness app claims AI, ask: “What is the AI actually doing that couldn’t be done with basic programming?”</p>
</section>
</section>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>Calm is a well-designed meditation app with good content. The guided meditations helped me manage stress during a busy recruiting and school period.</p>
<p>But the “AI personalization” appears to be marketing rather than meaningful technology. After a week of use and deliberate testing, I saw no evidence that the app was learning my preferences or adapting recommendations based on my behavior.</p>
<p>The recommendations seemed to come from: - My initial survey answers (static profile) - Content rotation (showing variety) - Basic category matching</p>
<p>This isn’t AI—it’s a preference quiz with some randomization.</p>
<p>For people who find Calm helpful and are willing to pay, that’s fine. The app has value. But it’s worth being clear about what you’re paying for: convenient access to quality meditation content, not AI-powered personalization.</p>
<p>As wellness apps increasingly add “AI” to their marketing, we should be skeptical. Real AI personalization would show measurable adaptation over time. Most apps, including Calm, don’t demonstrate this.</p>
<p>The meditation helped with my recruiting stress. The AI claims? Those just stressed me out more.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/liuaoraymond\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>